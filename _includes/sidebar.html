<aside class="sidebar">
    <div class="sidebar-list">

        {% assign parents = site.projects | where_exp: "item", "item.parent == nil" | sort: "order" %}

        {% for project in parents %}

            <div class="sidebar-group {% if page.parent == project.slug %}open{% endif %}">

                <a href="{{ project.url }}"
                   class="{% if page.url contains project.url %}active{% endif %}">
                    {{ project.title }}
                </a>

                {% assign children = site.projects | where: "parent", project.slug | sort: "order" %}

                {% if children.size > 0 %}
                    <div class="sidebar-sub">
                        {% for child in children %}
                            <a href="{{ child.url }}"
                               class="{% if page.url contains child.url %}active{% endif %}">
                                {{ child.title }}
                            </a>
                        {% endfor %}
                    </div>
                {% endif %}

            </div>

        {% endfor %}

    </div>
</aside>