<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title }} – {{ site.title }}</title>
    <link rel="stylesheet" href="/style.css">
</head>

<div id="lightbox" class="lightbox hidden">

    <!-- Close -->
    <button class="slideshow-close" id="slideshowClose" aria-label="Close">
        <img src="/assets/x.svg" alt=""
             onerror="this.style.display='none'; this.parentElement.innerHTML='×';">
    </button>

    <!-- Prev -->
    <button class="slideshow-nav slideshow-nav-left" id="slideshowNavLeft" aria-label="Previous image">
        <img src="/assets/prev.svg" alt="">
    </button>

    <!-- Image -->
    <img class="lightbox-image" src="">

    <!-- Next -->
    <button class="slideshow-nav slideshow-nav-right" id="slideshowNavRight" aria-label="Next image">
        <img src="/assets/next.svg" alt="">
    </button>

</div>

<body class="theme-gray">

<div class="layout">

    {% include header.html %}
    {% include sidebar.html %}

<main class="main">
    {{ content }}

    {% if page.collection %}

        {% assign collection_name = page.collection %}
        {% assign collection = site[collection_name] %}

        {% if page.parent %}
            {% assign siblings = collection 
                | where: "parent", page.parent 
                | sort: "date" %}
        {% else %}
            {% assign siblings = collection
                | where_exp: "item", "item.parent == nil"
                | sort: "date"
                | reverse %}
        {% endif %}

        {% for item in siblings %}
            {% if item.url == page.url %}
                {% assign current_index = forloop.index0 %}
            {% endif %}
        {% endfor %}

        <div class="project-navigation">

            {% if current_index > 0 %}
                {% assign prev_index = current_index | minus: 1 %}
                {% assign prev_item = siblings[prev_index] %}
                <a href="{{ prev_item.url }}" class="nav-prev">
                    ← {{ prev_item.title }}
                </a>
            {% endif %}

            {% if current_index < siblings.size | minus: 1 %}
                {% assign next_index = current_index | plus: 1 %}
                {% assign next_item = siblings[next_index] %}
                <a href="{{ next_item.url }}" class="nav-next">
                    {{ next_item.title }} →
                </a>
            {% endif %}

        </div>

    {% endif %}

</main>

</div>

<script src="/main.js"></script>
</body>
</html>